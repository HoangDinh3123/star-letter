<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>H·∫π h·∫π h·∫π</title>
<style>
  html, body {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    background: black;
    overflow: hidden;
    touch-action: none;
  }

  #container {
    width: 100vw;
    height: 100vh;
    transform-style: preserve-3d;
    transform-origin: center center;
    transition: transform 0.1s;
    position: relative;
    overflow: hidden;
  }

  .stars {
    position: absolute;
    width: 100%;
    height: 100%;
    background: black;
    z-index: 0;
  }

  .star {
    position: absolute;
    width: 2px;
    height: 2px;
    background: white;
    border-radius: 50%;
    animation: twinkle 2s infinite ease-in-out;
  }

  @keyframes twinkle {
    0%, 100% { opacity: 0.2; }
    50% { opacity: 1; }
  }

  .layer {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }

  .message {
    position: absolute;
    white-space: nowrap;
    color: white;
    font-weight: bold;
    text-shadow: 2px 2px 6px #fff;
    opacity: 0;
    animation: fall ease-in forwards;
    /* IMPORTANT: ƒë·ªÉ ch·ªØ lu√¥n th·∫≥ng */
    transform-style: preserve-3d;
  }

  @keyframes fall {
    0% {
      transform: translateY(-100px);
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    100% {
      transform: translateY(100vh);
      opacity: 0;
    }
  }

  /* font size m·∫∑c ƒë·ªãnh */
  .layer1 .message { font-size: 36px; animation-duration: 14s; z-index: 4; }
  .layer2 .message { font-size: 34px; animation-duration: 17s; z-index: 3; }
  .layer3 .message { font-size: 32px; animation-duration: 20s; z-index: 2; }
  .layer4 .message { font-size: 30px; animation-duration: 24s; z-index: 1; }

  /* font size ƒëi·ªán tho·∫°i */
  @media (max-width: 768px) {
    .layer1 .message { font-size: 48px; }
    .layer2 .message { font-size: 44px; }
    .layer3 .message { font-size: 40px; }
    .layer4 .message { font-size: 36px; }
  }
</style>
</head>
<body>

<div id="container">
  <div class="stars" id="stars"></div>
  <div class="layer layer1"></div>
  <div class="layer layer2"></div>
  <div class="layer layer3"></div>
  <div class="layer layer4"></div>
</div>

<script>
  // T·∫°o sao n·ªÅn lung linh
  const stars = document.getElementById('stars');
  for (let i = 0; i < 150; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.style.top = Math.random() * 100 + '%';
    star.style.left = Math.random() * 100 + '%';
    star.style.animationDuration = (Math.random() * 2 + 1) + 's';
    stars.appendChild(star);
  }

  // Danh s√°ch c√¢u + icon
  const messagesWithIcons = [
    { text: "ƒê·∫∑ng Thu Trang", icon: "‚ù§Ô∏è" },
    { text: "Trang xinh ƒë·∫πp ƒë√°ng y√™u t·ªët b·ª•ng=))", icon: "üòç" },
    { text: "Barcelona v√¥ ƒë·ªãch trong l√≤ng ng∆∞·ªùi h√¢m m·ªô", icon: "üåü" },
    { text: "Du h·ªçc sinh H√†n Qu·ªëc", icon: "üåû" },
    { text: "Anh trai say bye", icon: "üò¢" },
    { text: "Ro√°i ƒë∆°", icon: "üòä" },
    { text: "T√¥i l√† ƒëom ƒë√≥m.", icon: "‚òÄÔ∏è" },
    { text: "Fan Jack 20 nƒÉm", icon: "‚ú®" },
    { text: "V√† d√≤ng th∆∞ tay anh g·ª≠i trao em ng√†y n√†o<3", icon: "ü§ù" },
  ];

  const layers = [
    document.querySelector('.layer1'),
    document.querySelector('.layer2'),
    document.querySelector('.layer3'),
    document.querySelector('.layer4')
  ];

  function createMessage({text, icon}, layer) {
    const msg = document.createElement('div');
    msg.className = 'message';
    msg.innerHTML = `<span style="margin-right:8px;">${icon}</span>${text}`;
    msg.style.left = (Math.random() * 80 + 10) + '%';
    msg.style.top = '-50px';
    msg.style.animationDelay = (Math.random()) + 's';
    layer.appendChild(msg);

    // ƒê·ªÉ ch·ªØ lu√¥n th·∫≥ng, ƒë·∫£o ng∆∞·ª£c transform c·ªßa container cho message
    // Khi container xoay rotateX, rotateY th√¨ message s·∫Ω rotate ng∆∞·ª£c l·∫°i
    // C·∫≠p nh·∫≠t transform khi t·∫°o message
    updateMessageTransform(msg);

    setTimeout(() => msg.remove(), 30000);
  }

  let i = 0;
  setInterval(() => {
    const message = messagesWithIcons[i % messagesWithIcons.length];
    const layerIndex = i % 4;
    createMessage(message, layers[layerIndex]);
    i++;
  }, 1800);

  // Xoay container theo vu·ªët (touch & mouse)
  let scale = 1;
  let rotateX = 0;
  let rotateY = 0;
  let isDragging = false;
  let lastX, lastY;
  const container = document.getElementById('container');

  // C·∫≠p nh·∫≠t transform container + c√°c message gi·ªØ ch·ªØ th·∫≥ng
  function updateTransform() {
    container.style.transform = `scale(${scale}) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;

    // C·∫≠p nh·∫≠t c√°c message transform ng∆∞·ª£c l·∫°i
    document.querySelectorAll('.message').forEach(msg => {
      updateMessageTransform(msg);
    });
  }

  // Khi container rotate, message rotate ng∆∞·ª£c l·∫°i gi·ªØ ch·ªØ th·∫≥ng
  function updateMessageTransform(msg) {
    // Ng∆∞·ª£c rotate
    msg.style.transform = `rotateX(${-rotateX}deg) rotateY(${-rotateY}deg)`;
  }

  // Chu·ªôt
  document.addEventListener('mousedown', e => {
    isDragging = true;
    lastX = e.clientX;
    lastY = e.clientY;
  });

  document.addEventListener('mousemove', e => {
    if (!isDragging) return;
    const dx = e.clientX - lastX;
    const dy = e.clientY - lastY;
    rotateY += dx * 0.3;
    rotateX -= dy * 0.3;
    lastX = e.clientX;
    lastY = e.clientY;
    updateTransform();
  });

  document.addEventListener('mouseup', e => {
    isDragging = false;
  });

  // Touch (di ƒë·ªông)
  let lastTouchX = null;
  let lastTouchY = null;
  document.addEventListener('touchstart', e => {
    if (e.touches.length === 1) {
      lastTouchX = e.touches[0].clientX;
      lastTouchY = e.touches[0].clientY;
    }
  }, {passive: true});

  document.addEventListener('touchmove', e => {
    if (e.touches.length === 1) {
      const touchX = e.touches[0].clientX;
      const touchY = e.touches[0].clientY;
      const dx = touchX - lastTouchX;
      const dy = touchY - lastTouchY;
      rotateY += dx * 0.3;
      rotateX -= dy * 0.3;
      lastTouchX = touchX;
      lastTouchY = touchY;
      updateTransform();
    }
  }, {passive: false});

  document.addEventListener('touchend', e => {
    lastTouchX = null;
    lastTouchY = null;
  });

</script>

</body>
</html>
